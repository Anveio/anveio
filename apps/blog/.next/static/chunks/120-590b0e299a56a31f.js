(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[120],{8107:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var s=n(4788);let o=(0,s.Z)("Bird",[["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M3.4 18H12a8 8 0 0 0 8-8V7a4 4 0 0 0-7.28-2.3L2 20",key:"oj1oa8"}],["path",{d:"m20 7 2 .5-2 .5",key:"12nv4d"}],["path",{d:"M10 18v3",key:"1yea0a"}],["path",{d:"M14 17.75V21",key:"1pymcb"}],["path",{d:"M7 18a6 6 0 0 0 3.84-10.61",key:"1npnn0"}]])},4405:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var s=n(4788);let o=(0,s.Z)("Bone",[["path",{d:"M17 10c.7-.7 1.69 0 2.5 0a2.5 2.5 0 1 0 0-5 .5.5 0 0 1-.5-.5 2.5 2.5 0 1 0-5 0c0 .81.7 1.8 0 2.5l-7 7c-.7.7-1.69 0-2.5 0a2.5 2.5 0 0 0 0 5c.28 0 .5.22.5.5a2.5 2.5 0 1 0 5 0c0-.81-.7-1.8 0-2.5Z",key:"w610uw"}]])},2887:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var s=n(4788);let o=(0,s.Z)("Cat",[["path",{d:"M12 5c.67 0 1.35.09 2 .26 1.78-2 5.03-2.84 6.42-2.26 1.4.58-.42 7-.42 7 .57 1.07 1 2.24 1 3.44C21 17.9 16.97 21 12 21s-9-3-9-7.56c0-1.25.5-2.4 1-3.44 0 0-1.89-6.42-.5-7 1.39-.58 4.72.23 6.5 2.23A9.04 9.04 0 0 1 12 5Z",key:"x6xyqk"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M11.25 16.25h1.5L12 17l-.75-.75Z",key:"12kq1m"}]])},4915:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var s=n(4788);let o=(0,s.Z)("Dog",[["path",{d:"M10 5.172C10 3.782 8.423 2.679 6.5 3c-2.823.47-4.113 6.006-4 7 .08.703 1.725 1.722 3.656 1 1.261-.472 1.96-1.45 2.344-2.5",key:"19br0u"}],["path",{d:"M14.267 5.172c0-1.39 1.577-2.493 3.5-2.172 2.823.47 4.113 6.006 4 7-.08.703-1.725 1.722-3.656 1-1.261-.472-1.855-1.45-2.239-2.5",key:"11n1an"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M11.25 16.25h1.5L12 17l-.75-.75Z",key:"12kq1m"}],["path",{d:"M4.42 11.247A13.152 13.152 0 0 0 4 14.556C4 18.728 7.582 21 12 21s8-2.272 8-6.444c0-1.061-.162-2.2-.493-3.309m-9.243-6.082A8.801 8.801 0 0 1 12 5c.78 0 1.5.108 2.161.306",key:"wsu29d"}]])},6168:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var s=n(4788);let o=(0,s.Z)("Fish",[["path",{d:"M6.5 12c.94-3.46 4.94-6 8.5-6 3.56 0 6.06 2.54 7 6-.94 3.47-3.44 6-7 6s-7.56-2.53-8.5-6Z",key:"15baut"}],["path",{d:"M18 12v.5",key:"18hhni"}],["path",{d:"M16 17.93a9.77 9.77 0 0 1 0-11.86",key:"16dt7o"}],["path",{d:"M7 10.67C7 8 5.58 5.97 2.73 5.5c-1 1.5-1 5 .23 6.5-1.24 1.5-1.24 5-.23 6.5C5.58 18.03 7 16 7 13.33",key:"l9di03"}],["path",{d:"M10.46 7.26C10.2 5.88 9.17 4.24 8 3h5.8a2 2 0 0 1 1.98 1.67l.23 1.4",key:"1kjonw"}],["path",{d:"m16.01 17.93-.23 1.4A2 2 0 0 1 13.8 21H9.5a5.96 5.96 0 0 0 1.49-3.98",key:"1zlm23"}]])},8238:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var s=n(4788);let o=(0,s.Z)("MousePointer2",[["path",{d:"m4 4 7.07 17 2.51-7.39L21 11.07z",key:"1vqm48"}]])},2481:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var s=n(4788);let o=(0,s.Z)("Rabbit",[["path",{d:"M20 8.54V4a2 2 0 1 0-4 0v3",key:"49iql8"}],["path",{d:"M18 21h-8a4 4 0 0 1-4-4 7 7 0 0 1 7-7h.2L9.6 6.4a1.93 1.93 0 1 1 2.8-2.8L15.8 7h.2c3.3 0 6 2.7 6 6v1a2 2 0 0 1-2 2h-1c-1.7 0-3 1.3-3 3",key:"1i2yr3"}],["path",{d:"M7.61 12.53a3 3 0 1 0-1.6 4.3",key:"9ygxkv"}],["path",{d:"M13 16a3 3 0 0 1 2.24 5",key:"1epib5"}],["path",{d:"M18 12h.01",key:"yjnet6"}]])},1074:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var s=n(4788);let o=(0,s.Z)("Snail",[["path",{d:"M2 13a6 6 0 1 0 12 0 4 4 0 1 0-8 0 2 2 0 0 0 4 0",key:"hneq2s"}],["circle",{cx:"10",cy:"13",r:"8",key:"194lz3"}],["path",{d:"M2 21h12c4.4 0 8-3.6 8-8V7a2 2 0 1 0-4 0v6",key:"ixqyt7"}],["path",{d:"M18 3 19.1 5.2",key:"9tjm43"}],["path",{d:"M22 3 20.9 5.2",key:"j3odrs"}]])},6382:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var s=n(4788);let o=(0,s.Z)("Turtle",[["path",{d:"m12 10 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a8 8 0 1 0-16 0v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3l2-4h4Z",key:"1lbbv7"}],["path",{d:"M4.82 7.9 8 10",key:"m9wose"}],["path",{d:"M15.18 7.9 12 10",key:"p8dp2u"}],["path",{d:"M16.93 10H20a2 2 0 0 1 0 4H2",key:"12nsm7"}]])},992:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{unstable_getImgProps:function(){return unstable_getImgProps},default:function(){return d}});let s=n(7675),o=n(5271),u=n(584),i=n(1070),c=s._(n(7561)),unstable_getImgProps=e=>{(0,u.warnOnce)("Warning: unstable_getImgProps() is experimental and may change or be removed at any time. Use at your own risk.");let{props:t}=(0,o.getImgProps)(e,{defaultLoader:c.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,n]of Object.entries(t))void 0===n&&delete t[e];return{props:t}},d=i.Image},6072:function(e,t,n){e.exports=n(992)},2056:function(e,t,n){e.exports=n(9265)},4948:function(e,t,n){"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=n(7653),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},u=s.useState,i=s.useEffect,c=s.useLayoutEffect,d=s.useDebugValue;function r(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(e){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),s=u({inst:{value:n,getSnapshot:t}}),o=s[0].inst,l=s[1];return c(function(){o.value=n,o.getSnapshot=t,r(o)&&l({inst:o})},[e,n,t]),i(function(){return r(o)&&l({inst:o}),e(function(){r(o)&&l({inst:o})})},[e]),d(n),n};t.useSyncExternalStore=void 0!==s.useSyncExternalStore?s.useSyncExternalStore:l},3158:function(e,t,n){"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=n(7653),o=n(6881),u="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=o.useSyncExternalStore,c=s.useRef,d=s.useEffect,l=s.useMemo,m=s.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,s,o){var f=c(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;var v=i(e,(f=l(function(){function a(t){if(!c){if(c=!0,e=t,t=s(t),void 0!==o&&h.hasValue){var n=h.value;if(o(n,t))return i=n}return i=t}if(n=i,u(e,t))return n;var d=s(t);return void 0!==o&&o(n,d)?n:(e=t,i=d)}var e,i,c=!1,d=void 0===n?null:n;return[function(){return a(t())},null===d?void 0:function(){return a(d())}]},[t,n,s,o]))[0],f[1]);return d(function(){h.hasValue=!0,h.value=v},[v]),m(v),v}},6881:function(e,t,n){"use strict";e.exports=n(4948)},2143:function(e,t,n){"use strict";e.exports=n(3158)},8978:function(e,t,n){"use strict";n.d(t,{EH:function(){return ClientSideSuspense},m1:function(){return createRoomContext}});var s=n(4325),o=n(7653),u=n(2143);let nanoid=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((e,t)=>((t&=63)<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");var i=n(6881);function ClientSideSuspense(e){let[t,n]=o.useState(!1);return o.useEffect(()=>{n(!0)},[]),o.createElement(o.Suspense,{fallback:e.fallback},t?e.children():e.fallback)}var c=class extends Error{constructor(e,t){super("Create thread failed."),this.cause=e,this.context=t,this.name="CreateThreadError"}},d=class extends Error{constructor(e,t){super("Edit thread metadata failed."),this.cause=e,this.context=t,this.name="EditThreadMetadataError"}},l=class extends Error{constructor(e,t){super("Create comment failed."),this.cause=e,this.context=t,this.name="CreateCommentError"}},m=class extends Error{constructor(e,t){super("Edit comment failed."),this.cause=e,this.context=t,this.name="EditCommentError"}},f=class extends Error{constructor(e,t){super("Delete comment failed."),this.cause=e,this.context=t,this.name="DeleteCommentError"}},h=class extends Error{constructor(e,t){super("Add reaction failed."),this.cause=e,this.context=t,this.name="AddReactionError"}},v=class extends Error{constructor(e,t){super("Remove reaction failed."),this.cause=e,this.context=t,this.name="RemoveReactionError"}};function useIsDocumentVisible(){let e=(0,i.useSyncExternalStore)(subscribe,getSnapshot,getSnapshot);return e}function subscribe(e){return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}}function getSnapshot(){return!("undefined"!=typeof document)||"visible"===document.visibilityState}function useIsOnline(){let e=(0,o.useRef)(!0),t=(0,o.useCallback)(t=>{function handleIsOnline(){e.current=!0,t()}function handleIsOffline(){e.current=!1,t()}return window.addEventListener("online",handleIsOnline),window.addEventListener("offline",handleIsOffline),()=>{window.removeEventListener("online",handleIsOnline),window.removeEventListener("offline",handleIsOffline)}},[]),n=(0,o.useCallback)(()=>e.current,[]),s=(0,i.useSyncExternalStore)(t,n,n);return s}var p=0;function useRevalidateCache(e,t,n={}){let s=(0,o.useRef)(!0),{dedupingInterval:u=2e3,errorRetryInterval:i=5e3,errorRetryCount:c=5}=n,d=(0,o.useCallback)(async(n,o=0)=>{let l;let m=!e.request||!n;function deleteActiveRequest(){let t=e.request;t&&t.timestamp===l&&(e.request=void 0)}try{if(m){let n=e.cache;n||(e.cache={isLoading:!0}),e.request={fetcher:t(),timestamp:++p}}let n=e.request;if(!n)return;l=n.timestamp;let s=await n.fetcher;if(m&&setTimeout(deleteActiveRequest,u),!e.request||e.request.timestamp!==l)return;let o=e.mutation;if(o&&(o.startTime>l||o.endTime>l||0===o.endTime))return;e.cache={isLoading:!1,data:s}}catch(u){deleteActiveRequest();let t="visible"===document.visibilityState,n=s.current;m&&t&&n&&function(){let e=~~((Math.random()+.5)*(1<<(o<8?o:8)))*i;o>c||setTimeout(()=>{d(!1,o+1)},e)}(),e.cache={data:e.cache?.data,isLoading:!1,error:u}}},[e,t,u,i,c]);(0,o.useEffect)(()=>{function handleIsOnline(){s.current=!0}function handleIsOffline(){s.current=!1}return window.addEventListener("online",handleIsOnline),window.addEventListener("offline",handleIsOffline),()=>{window.removeEventListener("online",handleIsOnline),window.removeEventListener("offline",handleIsOffline)}},[]);let l=(0,o.useCallback)(e=>d(e,0),[d]);return l}function useMutate(e,t){let n=(0,o.useCallback)(async(n,s)=>{let o;let u=++p;e.mutation={startTime:u,endTime:0};let i=e.cache;e.cache={isLoading:!1,data:s.optimisticData};try{await n}catch(e){o=e}let c=e.mutation;if(c&&u!==c.startTime){if(o)throw o;return}if(o&&(e.cache=i),e.mutation={startTime:u,endTime:++p},e.request=void 0,t(!1),o)throw o},[e,t]);return n}function createOptimisticId(e){return`${e}_${nanoid()}`}function useInitial(e){return(0,o.useState)(e)[0]}var g={isLoading:!1,data:void 0,error:void 0},noop=()=>{};function useAsyncCache(e,t,n){let s=useInitial(n),u=(0,o.useMemo)(()=>{if(null===t||!e)return null;let n=e.create(t);return n.get(),n},[e,t]),c=(0,o.useCallback)(e=>u?.subscribe(e)??noop,[u]),d=(0,o.useCallback)(()=>u?.getState()??g,[u]),l=(0,o.useCallback)(()=>u?.revalidate(),[u]),m=(0,i.useSyncExternalStore)(c,d,d),f=(0,o.useRef)(),h=m.data;if((0,o.useEffect)(()=>{f.current={key:t,data:m.data}},[t,m.data]),!u)return{isLoading:!1,data:void 0,error:void 0,getState:d,revalidate:l};if(s?.suspense){let e=d().error;if(e)throw e;if(d().isLoading)throw new Promise(e=>{u.subscribeOnce(t=>{t.isLoading||e()})})}return m.isLoading&&s?.keepPreviousDataWhileLoading&&void 0===m.data&&f.current?.key!==t&&void 0!==f.current?.data&&(h=f.current.data),{isLoading:m.isLoading,data:h,error:m.error,getState:d,revalidate:l}}function useLatest(e){let t=(0,o.useRef)(e);return(0,o.useEffect)(()=>{t.current=e},[e]),t}var noop2=()=>{},identity=e=>e;function useSyncExternalStore5(e,t,n){return(0,u.useSyncExternalStoreWithSelector)(e,t,n,identity)}var y=Object.freeze([]);function alwaysEmptyList(){return y}function alwaysNull(){return null}function warnIfNoResolveUsers(e){}var b=o.createContext(null);function createRoomContext(e,t){let n=o.createContext(null);function RoomProviderOuter(t){let[n]=o.useState(()=>new Map),s=o.useCallback((t,s)=>{let o=n.get(t);if(o)return o;let u=e.enterRoom(t,s),i=u.leave;return u.leave=()=>{i(),n.delete(t)},n.set(t,u),u},[n]);return o.createElement(RoomProviderInner,{...t,stableEnterRoom:s})}function RoomProviderInner(e){let{id:t,stableEnterRoom:s}=e,u=useInitial({initialPresence:e.initialPresence,initialStorage:e.initialStorage,unstable_batchedUpdates:e.unstable_batchedUpdates,autoConnect:e.autoConnect??e.shouldInitiallyConnect??"undefined"!=typeof window}),[{room:i},c]=o.useState(()=>s(t,{...u,autoConnect:!1}));return o.useEffect(()=>{let e=s(t,u);c(e);let{room:n,leave:o}=e;return u.autoConnect&&n.connect(),()=>{let e=y.get(n);e&&y.delete(n),o()}},[t,u,s]),o.createElement(n.Provider,{value:i},o.createElement(b.Provider,{value:L},e.children))}function connectionIdSelector(e){return e.map(e=>e.connectionId)}function useRoom(){let e=o.useContext(n);if(null===e)throw Error("RoomProvider is missing from the React tree.");return e}function useStatus(){let e=useRoom(),t=e.events.status.subscribe,n=e.getStatus,s=e.getStatus;return useSyncExternalStore5(t,n,s)}function useMyPresence(){let e=useRoom(),t=e.events.myPresence.subscribe,n=e.getPresence,s=useSyncExternalStore5(t,n,n),o=e.updatePresence;return[s,o]}function useUpdateMyPresence(){return useRoom().updatePresence}function useOthers(e,t){let n=useRoom(),s=n.events.others.subscribe,o=n.getOthers;return(0,u.useSyncExternalStoreWithSelector)(s,o,alwaysEmptyList,e??identity,t)}function useOthersConnectionIds(){return useOthers(connectionIdSelector,s.Xd)}function useOthersMapped(e,t){let n=o.useCallback(t=>t.map(t=>[t.connectionId,e(t)]),[e]),s=o.useCallback((e,n)=>{let s=t??Object.is;return e.length===n.length&&e.every((e,t)=>{let o=n[t];return e[0]===o[0]&&s(e[1],o[1])})},[t]);return useOthers(n,s)}let p=Symbol();function useOther(e,t,n){let s=o.useCallback(n=>{let s=n.find(t=>t.connectionId===e);return void 0!==s?t(s):p},[e,t]),u=o.useCallback((e,t)=>{if(e===p||t===p)return e===t;let s=n??Object.is;return s(e,t)},[n]),i=useOthers(s,u);if(i===p)throw Error(`No such other user with connection id ${e} exists`);return i}function useBroadcastEvent(){let e=useRoom();return o.useCallback((t,n={shouldQueueEventIfNotReady:!1})=>{e.broadcastEvent(t,n)},[e])}function useOthersListener(e){let t=useRoom(),n=useLatest(e);o.useEffect(()=>t.events.others.subscribe(e=>n.current(e)),[t,n])}function useLostConnectionListener(e){let t=useRoom(),n=useLatest(e);o.useEffect(()=>t.events.lostConnection.subscribe(e=>n.current(e)),[t,n])}function useErrorListener(e){let t=useRoom(),n=useLatest(e);o.useEffect(()=>t.events.error.subscribe(e=>n.current(e)),[t,n])}function useEventListener(e){let t=useRoom(),n=useLatest(e);o.useEffect(()=>t.events.customEvent.subscribe(e=>{n.current(e)}),[t,n])}function useSelf(e,t){let n=useRoom(),s=n.events.self.subscribe,i=n.getSelf,c=e??identity,d=o.useCallback(e=>null!==e?c(e):null,[c]);return(0,u.useSyncExternalStoreWithSelector)(s,i,alwaysNull,d,t)}function useMutableStorageRoot(){let e=useRoom(),t=e.events.storageDidLoad.subscribeOnce,n=e.getStorageSnapshot;return useSyncExternalStore5(t,n,alwaysNull)}function useStorageRoot(){return[useMutableStorageRoot()]}function useHistory(){return useRoom().history}function useUndo(){return useHistory().undo}function useRedo(){return useHistory().redo}function useCanUndo(){let e=useRoom(),t=e.events.history.subscribe,n=e.history.canUndo;return useSyncExternalStore5(t,n,n)}function useCanRedo(){let e=useRoom(),t=e.events.history.subscribe,n=e.history.canRedo;return useSyncExternalStore5(t,n,n)}function useBatch(){return useRoom().batch}function useLegacyKey(e){let t=useRoom(),n=useMutableStorageRoot(),u=function(){let[,e]=(0,o.useReducer)(e=>e+1,0);return e}();return(o.useEffect(()=>{let o;if(null===n)return;let i=n.get(e);function subscribeToCurr(){o=(0,s.I6)(i)?t.subscribe(i,u):void 0}subscribeToCurr(),u();let c=t.subscribe(n,function(){let t=n.get(e);t!==i&&(o?.(),i=t,subscribeToCurr(),u())});return()=>{c(),o?.()}},[n,t,e,u]),null===n)?null:n.get(e)}function useStorage(e,t){let n=useRoom(),s=useMutableStorageRoot(),i=o.useCallback(t=>null!==t?e(t):null,[e]),c=o.useCallback(e=>null!==s?n.subscribe(s,e,{isDeep:!0}):noop2,[n,s]),d=o.useCallback(()=>{if(null===s)return null;{let e=s.toImmutable();return e}},[s]);return(0,u.useSyncExternalStoreWithSelector)(c,d,alwaysNull,i,t)}function ensureNotServerSide(){if("undefined"==typeof window)throw Error("You cannot use the Suspense version of this hook on the server side. Make sure to only call them on the client side.\nFor tips, see https://liveblocks.io/docs/api-reference/liveblocks-react#suspense-avoid-ssr")}function useSuspendUntilStorageLoaded(){let e=useRoom();if(null===e.getStorageSnapshot())throw ensureNotServerSide(),new Promise(t=>{e.events.storageDidLoad.subscribeOnce(()=>t())})}function useSuspendUntilPresenceLoaded(){let e=useRoom();if(null===e.getSelf())throw ensureNotServerSide(),new Promise(t=>{e.events.self.subscribeOnce(()=>t()),e.events.status.subscribeOnce(()=>t())})}function useMutation(e,t){let n=useRoom();return o.useMemo(()=>(...t)=>n.batch(()=>e(function(e){let t="This mutation cannot be used until connected to the Liveblocks room";return{get storage(){let n=e.getStorageSnapshot();if(null===n)throw Error(t);return n},get self(){let n=e.getSelf();if(null===n)throw Error(t);return n},get others(){let n=e.getOthers();if(null===e.getSelf())throw Error(t);return n},setMyPresence:e.updatePresence}}(n),...t)),[n,...t])}function useLegacyKeySuspense(e){return useSuspendUntilStorageLoaded(),useLegacyKey(e)}let g=(0,s.Zb)(),y=new Map;function getCommentsRoom(e){let t=y.get(e);return void 0===t&&(t=function(e,t){let n=function(){let e,t,n;let o=(0,s.Zb)();return{get cache(){return e},set cache(value){e=value,o.notify(e)},get request(){return t},set request(value){t=value},get mutation(){return n},set mutation(value){n=value},subscribe:e=>o.subscribe(e)}}();function _useThreads(t){let s=(0,i.useSyncExternalStore)(e.events.status.subscribe,e.getStatus,e.getStatus),u=useIsOnline(),c=useIsDocumentVisible(),d=function(e,t,n){if(e&&t)return n?3e4:5e3}(u,c,"connected"===s);(function(e,t,n={}){let s=useIsOnline(),u=useIsDocumentVisible(),{revalidateOnFocus:i=!0,revalidateOnReconnect:c=!0,refreshInterval:d=0}=n;(0,o.useEffect)(()=>{let n;return function scheduleRevalidation(){0!==d&&(n=window.setTimeout(()=>{if(s&&u&&!e.cache?.error){t(!0).then(scheduleRevalidation);return}scheduleRevalidation()},d))}(),()=>{window.clearTimeout(n)}},[t,d,s,u,e]),(0,o.useEffect)(()=>{function handleIsOnline(){c&&u&&t(!0)}return window.addEventListener("online",handleIsOnline),()=>{window.removeEventListener("online",handleIsOnline)}},[t,c,u]),(0,o.useEffect)(()=>{function handleVisibilityChange(){let e="visible"===document.visibilityState;i&&e&&s&&t(!0)}return document.addEventListener("visibilitychange",handleVisibilityChange),()=>{document.removeEventListener("visibilitychange",handleVisibilityChange)}},[t,i,s])})(n,t,{revalidateOnFocus:!0,revalidateOnReconnect:!0,refreshInterval:d}),(0,o.useEffect)(()=>{let n=e.events.comments.subscribe(()=>{t(!0)});return()=>{n()}},[t]);let l=(0,i.useSyncExternalStore)(n.subscribe,()=>n.cache,()=>n.cache);return!l||l.isLoading?{isLoading:!0}:{isLoading:l.isLoading,threads:l.data??[],error:l.error}}function getThreads(){let e=n.cache;if(!e||e.isLoading||e.error||void 0===e.data)throw Error("Cannot update threads or comments before they are loaded.");return e.data}function getCurrentUserId(){let t=e.getSelf();return null===t||void 0===t.id?"anonymous":t.id}function handleCommentsApiError(e){let t=`Request failed with status ${e.status}: ${e.message}`;if(e.details?.error==="FORBIDDEN"){let n=[t,e.details.suggestion,e.details.docs].filter(Boolean).join("\n");s.iV.error(n)}return Error(t)}return{useThreads:function(){let t=useRevalidateCache(n,e.getThreads);return(0,o.useEffect)(()=>{t(!0)},[t]),_useThreads(t)},useThreadsSuspense:function(){let t=useRevalidateCache(n,e.getThreads),s=_useThreads(t);if(s.error)throw s.error;if(s.isLoading||!s.threads)throw t(!0);return{threads:s.threads,isLoading:!1}},useCreateThread:function(){let u=useRevalidateCache(n,e.getThreads),i=useMutate(n,u),d=(0,o.useCallback)(n=>{let o=n.body,u="metadata"in n?n.metadata:{},d=getThreads(),l=createOptimisticId("th"),m=createOptimisticId("cm"),f=new Date().toISOString(),h={id:m,threadId:l,roomId:e.id,createdAt:f,type:"comment",userId:getCurrentUserId(),body:o,reactions:[]},v={id:l,type:"thread",createdAt:f,roomId:e.id,metadata:u,comments:[h]};return i(e.createThread({threadId:l,commentId:m,body:o,metadata:u}),{optimisticData:[...d,v]}).catch(n=>{if(!(n instanceof s.iz))throw n;let i=handleCommentsApiError(n);t.notify(new c(i,{roomId:e.id,threadId:l,commentId:m,body:o,metadata:u}))}),v},[i]);return d},useEditThreadMetadata:function(){let u=useRevalidateCache(n,e.getThreads),i=useMutate(n,u),c=(0,o.useCallback)(n=>{let o=n.threadId,u="metadata"in n?n.metadata:{},c=getThreads(),l=c.map(e=>e.id===o?{...e,metadata:{...e.metadata,...u}}:e);i(e.editThreadMetadata({metadata:u,threadId:o}),{optimisticData:l}).catch(n=>{if(!(n instanceof s.iz))throw n;let i=handleCommentsApiError(n);t.notify(new d(i,{roomId:e.id,threadId:o,metadata:u}))})},[i]);return c},useCreateComment:function(){let u=useRevalidateCache(n,e.getThreads),i=useMutate(n,u),c=(0,o.useCallback)(({threadId:n,body:o})=>{let u=getThreads(),c=createOptimisticId("cm"),d=new Date().toISOString(),m={id:c,threadId:n,roomId:e.id,type:"comment",createdAt:d,userId:getCurrentUserId(),body:o,reactions:[]},f=u.map(e=>e.id===n?{...e,comments:[...e.comments,m]}:e);return i(e.createComment({threadId:n,commentId:c,body:o}),{optimisticData:f}).catch(u=>{if(!(u instanceof s.iz))throw u;let i=handleCommentsApiError(u);t.notify(new l(i,{roomId:e.id,threadId:n,commentId:c,body:o}))}),m},[i]);return c},useEditComment:function(){let u=useRevalidateCache(n,e.getThreads),i=useMutate(n,u),c=(0,o.useCallback)(({threadId:n,commentId:o,body:u})=>{let c=getThreads(),d=new Date().toISOString(),l=c.map(e=>e.id===n?{...e,comments:e.comments.map(e=>e.id===o?{...e,editedAt:d,body:u}:e)}:e);i(e.editComment({threadId:n,commentId:o,body:u}),{optimisticData:l}).catch(i=>{if(!(i instanceof s.iz))throw i;let c=handleCommentsApiError(i);t.notify(new m(c,{roomId:e.id,threadId:n,commentId:o,body:u}))})},[i]);return c},useDeleteComment:function(){let u=useRevalidateCache(n,e.getThreads),i=useMutate(n,u),c=(0,o.useCallback)(({threadId:n,commentId:o})=>{let u=getThreads(),c=new Date().toISOString(),d=[];for(let e of u)if(e.id===n){let t={...e,comments:e.comments.map(e=>e.id===o?{...e,deletedAt:c,body:void 0}:e)};t.comments.some(e=>void 0===e.deletedAt)&&d.push(t)}else d.push(e);i(e.deleteComment({threadId:n,commentId:o}),{optimisticData:d}).catch(u=>{if(!(u instanceof s.iz))throw u;let i=handleCommentsApiError(u);t.notify(new f(i,{roomId:e.id,threadId:n,commentId:o}))})},[i]);return c},useAddReaction:function(){let u=useRevalidateCache(n,e.getThreads),i=useMutate(n,u),c=(0,o.useCallback)(({threadId:n,commentId:o,emoji:u})=>{let c=getThreads(),d=new Date().toISOString(),l=getCurrentUserId(),m=c.map(e=>e.id===n?{...e,comments:e.comments.map(e=>{let t;return e.id!==o?e:(t=e.reactions.some(e=>e.emoji===u)?e.reactions.map(e=>e.emoji===u?{...e,users:[...e.users,{id:l}]}:e):[...e.reactions,{emoji:u,createdAt:d,users:[{id:l}]}],{...e,reactions:t})})}:e);i(e.addReaction({threadId:n,commentId:o,emoji:u}),{optimisticData:m}).catch(i=>{if(!(i instanceof s.iz))throw i;let c=handleCommentsApiError(i);t.notify(new h(c,{roomId:e.id,threadId:n,commentId:o,emoji:u}))})},[i]);return c},useRemoveReaction:function(){let u=useRevalidateCache(n,e.getThreads),i=useMutate(n,u),c=(0,o.useCallback)(({threadId:n,commentId:o,emoji:u})=>{let c=getThreads(),d=getCurrentUserId(),l=c.map(e=>e.id===n?{...e,comments:e.comments.map(e=>{if(e.id!==o)return e;let t=e.reactions.findIndex(e=>e.emoji===u),n=e.reactions;return t>=0&&e.reactions[t].users.some(e=>e.id===d)&&(e.reactions[t].users.length<=1?(n=[...e.reactions]).splice(t,1):n[t]={...n[t],users:n[t].users.filter(e=>e.id!==d)}),{...e,reactions:n}})}:e);i(e.removeReaction({threadId:n,commentId:o,emoji:u}),{optimisticData:l}).catch(i=>{if(!(i instanceof s.iz))throw i;let c=handleCommentsApiError(i);t.notify(new v(c,{roomId:e.id,threadId:n,commentId:o,emoji:u}))})},[i]);return c}}}(e,g),y.set(e,t)),t}function useCreateThread(){let e=useRoom();return getCommentsRoom(e).useCreateThread()}function useEditThreadMetadata(){let e=useRoom();return getCommentsRoom(e).useEditThreadMetadata()}function useAddReaction(){let e=useRoom();return getCommentsRoom(e).useAddReaction()}function useRemoveReaction(){let e=useRoom();return getCommentsRoom(e).useRemoveReaction()}function useCreateComment(){let e=useRoom();return getCommentsRoom(e).useCreateComment()}function useEditComment(){let e=useRoom();return getCommentsRoom(e).useEditComment()}function useDeleteComment(){let e=useRoom();return getCommentsRoom(e).useDeleteComment()}let{resolveUsers:S,resolveMentionSuggestions:C}=t??{},E=S?(0,s.$s)(async e=>{let t=await S(JSON.parse(e));return t?.[0]}):void 0,R=(0,s.$s)(C?e=>C(JSON.parse(e)):()=>Promise.resolve([])),w={RoomContext:n,RoomProvider:RoomProviderOuter,useRoom,useStatus,useBatch,useBroadcastEvent,useOthersListener,useLostConnectionListener,useErrorListener,useEventListener,useHistory,useUndo,useRedo,useCanRedo,useCanUndo,useList:useLegacyKey,useMap:useLegacyKey,useObject:useLegacyKey,useStorageRoot,useStorage,useSelf,useMyPresence,useUpdateMyPresence,useOthers,useOthersMapped,useOthersConnectionIds,useOther,useMutation,useThreads:function(){let e=useRoom();return getCommentsRoom(e).useThreads()},useUser:function(e){let t=useRoom(),n=o.useMemo(()=>(0,s.Pz)({userIds:[e],roomId:t.id}),[e,t.id]),u=useAsyncCache(E,n);return(o.useEffect(()=>warnIfNoResolveUsers(E),[]),u.isLoading)?{isLoading:!0}:{user:u.data,error:u.error,isLoading:!1}},useCreateThread,useEditThreadMetadata,useCreateComment,useEditComment,useDeleteComment,useAddReaction,useRemoveReaction,suspense:{RoomContext:n,RoomProvider:RoomProviderOuter,useRoom,useStatus,useBatch,useBroadcastEvent,useOthersListener,useLostConnectionListener,useErrorListener,useEventListener,useHistory,useUndo,useRedo,useCanRedo,useCanUndo,useList:useLegacyKeySuspense,useMap:useLegacyKeySuspense,useObject:useLegacyKeySuspense,useStorageRoot,useStorage:function(e,t){return useSuspendUntilStorageLoaded(),useStorage(e,t)},useSelf:function(e,t){return useSuspendUntilPresenceLoaded(),useSelf(e,t)},useMyPresence,useUpdateMyPresence,useOthers:function(e,t){return useSuspendUntilPresenceLoaded(),useOthers(e,t)},useOthersMapped:function(e,t){return useSuspendUntilPresenceLoaded(),useOthersMapped(e,t)},useOthersConnectionIds:function(){return useSuspendUntilPresenceLoaded(),useOthersConnectionIds()},useOther:function(e,t,n){return useSuspendUntilPresenceLoaded(),useOther(e,t,n)},useMutation,useThreads:function(){let e=useRoom();return getCommentsRoom(e).useThreadsSuspense()},useUser:function(e){let t=useRoom(),n=o.useMemo(()=>(0,s.Pz)({userIds:[e],roomId:t.id}),[e,t.id]),u=useAsyncCache(E,n,{suspense:!0});return o.useEffect(()=>warnIfNoResolveUsers(E),[]),{user:u.data,isLoading:!1}},useCreateThread,useEditThreadMetadata,useCreateComment,useEditComment,useDeleteComment,useAddReaction,useRemoveReaction}},L={...w,hasResolveMentionSuggestions:void 0!==C,useMentionSuggestions:function(e){let t=useRoom(),n=function(e,t=500){let n=(0,o.useRef)(),[s,u]=(0,o.useState)(e);return(0,o.useEffect)(()=>{if(!1!==t)return void 0===n.current&&u(e),n.current=window.setTimeout(()=>{u(e),n.current=void 0},t),()=>{window.clearTimeout(n.current)}},[e,t]),s}(e,500),u=o.useMemo(()=>void 0!==n?(0,s.Pz)({text:n,roomId:t.id}):null,[n,t.id]),{data:i}=useAsyncCache(R,u,{keepPreviousDataWhileLoading:!0});return i}};return w}(0,s.l8)("@liveblocks/react","1.8.2","esm")},5069:function(e,t,n){"use strict";n.d(t,{_:function(){return useAnimation}});var s=n(8256),o=n(842),u=n(5985);function animationControls(){let e=!1,t=new Set,n={subscribe:e=>(t.add(e),()=>void t.delete(e)),start(n,o){(0,s.k)(e,"controls.start() should only be called after a component has mounted. Consider calling within a useEffect hook.");let i=[];return t.forEach(e=>{i.push((0,u.d)(e,n,{transitionOverride:o}))}),Promise.all(i)},set:n=>((0,s.k)(e,"controls.set() should only be called after a component has mounted. Consider calling within a useEffect hook."),t.forEach(e=>{(0,o.gg)(e,n)})),stop(){t.forEach(e=>{!function(e){e.values.forEach(e=>e.stop())}(e)})},mount:()=>(e=!0,()=>{e=!1,n.stop()})};return n}var i=n(8787),c=n(323);let useAnimation=function(){let e=(0,i.h)(animationControls);return(0,c.L)(e.mount,[]),e}}}]);