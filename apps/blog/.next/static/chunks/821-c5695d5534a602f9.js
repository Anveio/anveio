(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[821],{9344:function(e,r,t){Promise.resolve().then(t.bind(t,1145))},1145:function(e,r,t){"use strict";t.r(r),t.d(r,{AuthForm:function(){return AuthForm}});var s=t(7573),a=t(7653),i=t(6879),n=t(6385);let o=i.fC,l=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(i.aV,{ref:r,className:(0,n.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-zinc-100 p-1 text-zinc-500 dark:bg-zinc-800 dark:text-zinc-400",t),...a})});l.displayName=i.aV.displayName;let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(i.xz,{ref:r,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-zinc-950 data-[state=active]:shadow dark:ring-offset-zinc-950 dark:focus-visible:ring-zinc-300 dark:data-[state=active]:bg-zinc-950 dark:data-[state=active]:text-zinc-50",t),...a})});d.displayName=i.xz.displayName;let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(i.VY,{ref:r,className:(0,n.cn)("mt-2 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 focus-visible:ring-offset-2 dark:ring-offset-zinc-950 dark:focus-visible:ring-zinc-300",t),...a})});c.displayName=i.VY.displayName;var u=t(9484);let m=(0,u.j)("relative w-full rounded-lg border border-zinc-200 px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-zinc-950 [&>svg~*]:pl-7 dark:border-zinc-800 dark:[&>svg]:text-zinc-50",{variants:{variant:{default:"bg-white text-zinc-950 dark:bg-zinc-950 dark:text-zinc-50",destructive:"border-red-500/50 text-red-500 dark:border-red-500 [&>svg]:text-red-500 dark:border-red-900/50 dark:text-red-900 dark:dark:border-red-900 dark:[&>svg]:text-red-900"}},defaultVariants:{variant:"default"}}),f=a.forwardRef((e,r)=>{let{className:t,variant:a,...i}=e;return(0,s.jsx)("div",{ref:r,role:"alert",className:(0,n.cn)(m({variant:a}),t),...i})});f.displayName="Alert";let x=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("h5",{ref:r,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",t),...a})});x.displayName="AlertTitle";let p=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",t),...a})});p.displayName="AlertDescription";var h=t(5380),g=t(5772),b=t(432),j=t(6342),w=t(1500);let v=(0,u.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),y=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(w.f,{ref:r,className:(0,n.cn)(v(),t),...a})});y.displayName=w.f.displayName;let N=j.RV,z=a.createContext({}),FormField=e=>{let{...r}=e;return(0,s.jsx)(z.Provider,{value:{name:r.name},children:(0,s.jsx)(j.Qr,{...r})})},useFormField=()=>{let e=a.useContext(z),r=a.useContext(k),{getFieldState:t,formState:s}=(0,j.Gc)(),i=t(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=r;return{id:n,name:e.name,formItemId:"".concat(n,"-form-item"),formDescriptionId:"".concat(n,"-form-item-description"),formMessageId:"".concat(n,"-form-item-message"),...i}},k=a.createContext({}),F=a.forwardRef((e,r)=>{let{className:t,...i}=e,o=a.useId();return(0,s.jsx)(k.Provider,{value:{id:o},children:(0,s.jsx)("div",{ref:r,className:(0,n.cn)("space-y-2",t),...i})})});F.displayName="FormItem";let S=a.forwardRef((e,r)=>{let{className:t,...a}=e,{error:i,formItemId:o}=useFormField();return(0,s.jsx)(y,{ref:r,className:(0,n.cn)(i&&"text-red-500 dark:text-red-900",t),htmlFor:o,...a})});S.displayName="FormLabel";let C=a.forwardRef((e,r)=>{let{...t}=e,{error:a,formItemId:i,formDescriptionId:n,formMessageId:o}=useFormField();return(0,s.jsx)(b.g7,{ref:r,id:i,"aria-describedby":a?"".concat(n," ").concat(o):"".concat(n),"aria-invalid":!!a,...t})});C.displayName="FormControl";let R=a.forwardRef((e,r)=>{let{className:t,...a}=e,{formDescriptionId:i}=useFormField();return(0,s.jsx)("p",{ref:r,id:i,className:(0,n.cn)("text-[0.8rem] text-zinc-500 dark:text-zinc-400",t),...a})});R.displayName="FormDescription";let E=a.forwardRef((e,r)=>{let{className:t,children:a,...i}=e,{error:o,formMessageId:l}=useFormField(),d=o?String(null==o?void 0:o.message):a;return d?(0,s.jsx)("p",{ref:r,id:l,className:(0,n.cn)("text-[0.8rem] font-medium text-red-500 dark:text-red-900",t),...i,children:d}):null});E.displayName="FormMessage";let I=a.forwardRef((e,r)=>{let{className:t,type:a,...i}=e;return(0,s.jsx)("input",{type:a,className:(0,n.cn)("flex h-9 w-full rounded-md border border-zinc-200 border-zinc-200 bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-zinc-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-zinc-950 disabled:cursor-not-allowed disabled:opacity-50 dark:border-zinc-800 dark:border-zinc-800 dark:placeholder:text-zinc-400 dark:focus-visible:ring-zinc-300",t),ref:r,...i})});I.displayName="Input";var P=t(5536),V=t(8015),Z=t(8351),_=t(5060),G=t(8449),L=t(1521);let O=G.z.object({email:G.z.string().email({message:"Email must be in the correct format."}).min(3,{message:"Email must be at least 3 characters."}),password:G.z.string().min(6,{message:"Your password must be at least 6 characters."})});function LogInForm(){let{user:e,setUser:r}=(0,L.a)(),[t,i]=a.useState(!1),n=(0,j.cI)({resolver:(0,P.F)(O),mode:"onSubmit",defaultValues:{email:"",password:""}});return e?(0,s.jsxs)(f,{variant:"default",children:[(0,s.jsx)(_.Z,{className:"h-4 w-4"}),(0,s.jsx)(x,{children:"Sign up successful"}),(0,s.jsxs)(p,{children:["You are logged in as ",e.email," with ID ",e.id]})]}):(0,s.jsx)("div",{className:"relative max-w-xl m-auto space-y-4",children:(0,s.jsx)(Z.E.div,{initial:{opacity:1,y:0},children:(0,s.jsxs)(g.Zb,{className:"bg-background text-white",children:[(0,s.jsx)(g.Ol,{}),(0,s.jsx)(g.aY,{children:(0,s.jsx)(N,{...n,children:(0,s.jsxs)("form",{id:"log-in-form",action:"/api/auth/login/email",method:"post",onSubmit:n.handleSubmit(e=>{if(t)return;i(!0);let s=new FormData,{email:a,password:n}=e;s.append("email",a),s.append("password",n),console.log(s),fetch("/api/auth/login/email",{method:"POST",credentials:"same-origin",body:s}).then(e=>{if(e.ok)return e.json();throw Error("Something went wrong")}).then(e=>{r(e)}).finally(()=>{i(!1)})}),className:"space-y-8",children:[(0,s.jsx)(FormField,{control:n.control,name:"email",render:e=>{let{field:r}=e;return(0,s.jsxs)(F,{children:[(0,s.jsx)(S,{children:"Email address"}),(0,s.jsx)(C,{children:(0,s.jsx)(I,{...r,disabled:t,autoComplete:"email",required:!0})}),(0,s.jsx)(E,{})]})}}),(0,s.jsx)(FormField,{control:n.control,name:"password",render:e=>{let{field:r}=e;return(0,s.jsxs)(F,{children:[(0,s.jsx)(S,{children:"Password"}),(0,s.jsx)(C,{children:(0,s.jsx)(I,{...r,type:"password",disabled:t,autoComplete:"new-password",required:!0})}),(0,s.jsx)(E,{})]})}})]})})}),(0,s.jsx)(g.eW,{className:"justify-end",children:(0,s.jsxs)("div",{className:"space-x-1",children:[(0,s.jsx)(h.Button,{variant:"link",className:"text-white",children:"Forgot password?"}),(0,s.jsxs)(h.Button,{variant:"default",type:"submit",form:"log-in-form",children:["Log in",t?(0,s.jsx)(V.BGW,{className:"ml-2 h-4 w-4 animate-spin"}):(0,s.jsx)(V.LZ3,{className:"ml-2 h-4 w-4"})]})]})})]})})})}let registerNewUser=async(e,r)=>{let t=await fetch("/api/auth/sign-up",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r})});if(!t.body)throw Error("No Response Body");if(!t.ok)throw Error(t.status.toString())};var U=t(7277);let B=G.z.object({email:G.z.string().email({message:"Email must be in the correct format."}).min(3,{message:"Email must be at least 3 characters."}),password:G.z.string().min(6,{message:"Your password must be at least 6 characters."}),confirmPassword:G.z.string()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}).refine(e=>e.password!==e.email,{message:"Password cannot be the same as your email",path:["password"]});function SignUpForm(){let{user:e}=(0,L.a)(),[r,t]=a.useState(!1),i=(0,j.cI)({resolver:(0,P.F)(B),mode:"onSubmit",defaultValues:{email:"",password:""}});if(e)return(0,s.jsxs)(f,{variant:"default",children:[(0,s.jsx)(_.Z,{className:"h-4 w-4"}),(0,s.jsx)(x,{children:"Sign up successful"}),(0,s.jsxs)(p,{children:["You are logged in as ",e.email," with ID ",e.id]})]});let n=i.formState.isSubmitting;async function onSubmit(e){try{await registerNewUser(e.email,e.password),t(!0)}catch(e){t(!1)}finally{}}return(0,s.jsxs)("div",{className:"relative max-w-xl m-auto space-y-4",children:[(0,s.jsx)(U.M,{children:r?(0,s.jsx)(Z.E.div,{className:"w-full",initial:{opacity:0,y:10},animate:{y:10,opacity:1,transition:{duration:.5}},children:(0,s.jsxs)(f,{variant:"default",children:[(0,s.jsx)(_.Z,{className:"h-4 w-4"}),(0,s.jsx)(x,{children:"Good"}),(0,s.jsx)(p,{children:"Check your inbox for the invitation."})]})}):null}),(0,s.jsx)(Z.E.div,{initial:{opacity:1,y:0},animate:{opacity:r?0:1,y:r?10:0,transition:{duration:.5}},children:(0,s.jsxs)(g.Zb,{className:"bg-background text-white",children:[(0,s.jsx)(g.Ol,{}),(0,s.jsx)(g.aY,{children:(0,s.jsx)(N,{...i,children:(0,s.jsxs)("form",{id:"sign-up-form",action:"/api/auth/sign-up",method:"post",onSubmit:i.handleSubmit(onSubmit),className:"space-y-8",children:[(0,s.jsx)(FormField,{control:i.control,name:"email",render:e=>{let{field:r}=e;return(0,s.jsxs)(F,{children:[(0,s.jsx)(S,{children:"Email address"}),(0,s.jsx)(C,{children:(0,s.jsx)(I,{...r,disabled:n,autoComplete:"email",required:!0})}),(0,s.jsx)(E,{})]})}}),(0,s.jsx)(FormField,{control:i.control,name:"password",render:e=>{let{field:r}=e;return(0,s.jsxs)(F,{children:[(0,s.jsx)(S,{children:"Password"}),(0,s.jsx)(C,{children:(0,s.jsx)(I,{...r,type:"password",disabled:n,autoComplete:"new-password",required:!0})}),(0,s.jsx)(R,{children:"Must be at least 6 characters."}),(0,s.jsx)(E,{})]})}}),(0,s.jsx)(FormField,{control:i.control,name:"confirmPassword",render:e=>{let{field:r}=e;return(0,s.jsxs)(F,{children:[(0,s.jsx)(S,{children:"Confirm password"}),(0,s.jsx)(C,{children:(0,s.jsx)(I,{...r,type:"password",disabled:n,autoComplete:"new-password",required:!0})}),(0,s.jsx)(E,{})]})}})]})})}),(0,s.jsx)(g.eW,{className:"justify-end",children:(0,s.jsxs)(h.Button,{variant:"default",type:"submit",form:"sign-up-form",children:["Request",n?(0,s.jsx)(V.BGW,{className:"ml-2 h-4 w-4 animate-spin"}):(0,s.jsx)(V.LZ3,{className:"ml-2 h-4 w-4"})]})})]})})]})}let D={SIGN_UP:"s",LOGIN:"l"},AuthForm=e=>(0,s.jsxs)(o,{defaultValue:e.tab,className:"max-w-lg px:3 lg:px-0 mx-auto",children:[(0,s.jsxs)(l,{className:"grid w-full grid-cols-2 bg-zinc-800 text-white",children:[(0,s.jsx)(d,{value:D.SIGN_UP,children:"Sign up"}),(0,s.jsx)(d,{value:D.LOGIN,children:"Log in"})]}),(0,s.jsx)(c,{value:D.SIGN_UP,children:(0,s.jsx)(SignUpForm,{})}),(0,s.jsx)(c,{value:D.LOGIN,children:(0,s.jsx)(LogInForm,{})})]})},1521:function(e,r,t){"use strict";t.d(r,{S:function(){return a},a:function(){return useUser}});var s=t(7653);let a=s.createContext(void 0),useUser=()=>{let e=s.useContext(a);if(!e)throw Error("useUser must be used within a UserProvider");return e}},5380:function(e,r,t){"use strict";t.r(r),t.d(r,{Button:function(){return d},buttonVariants:function(){return l}});var s=t(7573),a=t(7653),i=t(432),n=t(9484),o=t(6385);let l=(0,n.j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primarytext-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,r)=>{let{className:t,variant:a,size:n,asChild:d=!1,...c}=e,u=d?i.g7:"button";return(0,s.jsx)(u,{className:(0,o.cn)(l({variant:a,size:n,className:t})),ref:r,...c})});d.displayName="Button"},5772:function(e,r,t){"use strict";t.d(r,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return n},aY:function(){return c},eW:function(){return u},ll:function(){return l}});var s=t(7573),a=t(7653),i=t(6385);let n=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("rounded-xl border bg-white z-50 bg-primary text-zinc-950 shadow dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50",t),...a})});n.displayName="Card";let o=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...a})});o.displayName="CardHeader";let l=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("h3",{ref:r,className:(0,i.cn)("font-semibold leading-none tracking-tight",t),...a})});l.displayName="CardTitle";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("p",{ref:r,className:(0,i.cn)("text-sm text-zinc-500 dark:text-zinc-400",t),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("p-6 pt-0",t),...a})});c.displayName="CardContent";let u=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",t),...a})});u.displayName="CardFooter"},6385:function(e,r,t){"use strict";t.d(r,{Dw:function(){return notEmpty},cn:function(){return cn}});var s=t(7157),a=t(5e3);function cn(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.m)((0,s.W)(r))}function notEmpty(e){return null!=e}t(8449).z.string().parse("pk_prod_VZU80bOr7Eblwb0wGO_fJBT9GSVZ-fZiIkuN0Qm7LDo8AuOFXL_ztglE_FkRTSZt")}}]);