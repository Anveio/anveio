"use strict";exports.id=9654,exports.ids=[9654],exports.modules={66355:(e,t,n)=>{n.d(t,{db:()=>d});var i=n(49295),o=n(33974);n(66412);let l=process.env.DATABASE_URL;if(!l)throw Error("DATABASE_URL missing");let r=(0,i.$j)({url:l}),d=(0,o.t)(r,{})},66412:(e,t,n)=>{n.d(t,{Mc:()=>_,iG:()=>s,rC:()=>c});var i=n(25668),o=n(98683),l=n(438),r=n(20320),d=n(20461),a=n(84515),u=n(20211);(0,i.iq)("events",{id:(0,o.eP)("id").primaryKey().autoincrement(),event_type:(0,l.L7)("event_type",{length:50}).notNull(),ipAddress:(0,l.L7)("ip_address",{length:39}),city:(0,l.L7)("city",{length:30}),country:(0,l.L7)("country",{length:30}),flagEmoji:(0,l.L7)("flag",{length:4}),region:(0,l.L7)("region",{length:30}),countryRegion:(0,l.L7)("country_region",{length:30}),latitude:(0,l.L7)("latitude",{length:30}),longitude:(0,l.L7)("longitude",{length:30}),browser_name:(0,l.L7)("browser_name",{length:50}),browser_version:(0,l.L7)("browser_version",{length:30}),rendering_engine_name:(0,l.L7)("rendering_engine_name",{length:30}),device_type:(0,l.L7)("device_type",{length:15}),device_vendor:(0,l.L7)("device_vendor",{length:50}),device_model:(0,l.L7)("device_model",{length:50}),client_recorded_at:(0,r.AB)("client_recorded_at").notNull(),metadata:(0,d.AV)("metadata"),created_at:(0,r.AB)("created_at").defaultNow(),session_id:(0,a.Kv)("session_id",{mode:"number"})});let _=(0,i.iq)("email_verification_tokens",{id:(0,o.eP)("id").primaryKey().autoincrement(),userId:(0,a.Kv)("user_id",{mode:"number"}).notNull(),email:(0,l.L7)("email",{length:319}).notNull(),token:(0,l.L7)("token",{length:255}).notNull().unique(),expiresAt:(0,r.AB)("expires_at").notNull(),createdAt:(0,r.AB)("created_at").defaultNow()},e=>({tokenIndex:(0,u.o9)("token_idx").on(e.token),emailIndex:(0,u.o9)("email_idx").on(e.email)})),s=(0,i.iq)("sessions",{id:(0,o.eP)("id").primaryKey(),userId:(0,a.Kv)("user_id",{mode:"number"}).notNull(),sessionToken:(0,l.L7)("session_token",{length:255}).notNull(),expiresAt:(0,r.AB)("expires_at").notNull(),createdAt:(0,r.AB)("created_at").defaultNow()}),c=(0,i.iq)("users",{id:(0,o.eP)("id").primaryKey().autoincrement(),publicId:(0,l.L7)("public_id",{length:12}).notNull(),email:(0,l.L7)("email",{length:319}).notNull().unique(),createdAt:(0,r.AB)("created_at").defaultNow(),updatedAt:(0,r.AB)("updated_at").defaultNow(),passwordHash:(0,l.L7)("password_hash",{length:200}),emailVerifiedAt:(0,r.AB)("email_verified_at")},e=>({emailIndex:(0,u.o9)("email_idx").on(e.email),publicId:(0,u.o9)("public_id_idx").on(e.publicId)}));(0,i.iq)("user_raw_uploads",{id:(0,o.eP)("id").primaryKey().autoincrement(),userId:(0,a.Kv)("user_id",{mode:"number"}).notNull(),object_key:(0,l.L7)("object_key",{length:255}).notNull(),bucket_name:(0,l.L7)("bucket_name",{length:255}).notNull(),bucket_region:(0,l.L7)("bucket_region",{length:50}).notNull(),mime_type:(0,l.L7)("mime_type",{length:50}).notNull(),file_size:(0,a.Kv)("file_size",{mode:"number"}).notNull(),uploaded_at:(0,r.AB)("uploaded_at").notNull(),last_accessed_at:(0,r.AB)("last_accessed_at"),createdAt:(0,r.AB)("created_at").defaultNow(),updatedAt:(0,r.AB)("updated_at").defaultNow()},e=>({userIdIndex:(0,u.o9)("raw_upload_user_id_idx").on(e.userId),objectKeyIndex:(0,u.o9)("raw_upload_object_key_idx").on(e.object_key)}))},42078:(e,t,n)=>{n.d(t,{k:()=>generate256BitToken});async function generate256BitToken(){if(!crypto||!crypto.subtle)throw Error("Crypto API is not available in this environment.");let e=new Uint8Array(32);crypto.getRandomValues(e);let t=Array.from(e).map(e=>e.toString(16).padStart(2,"0")).join("");return t}}};