exports.id=4683,exports.ids=[4683],exports.modules={67884:(e,s,r)=>{Promise.resolve().then(r.bind(r,98861))},73245:()=>{},98861:(e,s,r)=>{"use strict";r.r(s),r.d(s,{AuthForm:()=>AuthForm});var a=r(84196),t=r(78726),i=r(13273),n=r(245);let l=i.fC,d=t.forwardRef(({className:e,...s},r)=>a.jsx(i.aV,{ref:r,className:(0,n.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-zinc-100 p-1 text-zinc-500 dark:bg-zinc-800 dark:text-zinc-400",e),...s}));d.displayName=i.aV.displayName;let o=t.forwardRef(({className:e,...s},r)=>a.jsx(i.xz,{ref:r,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-zinc-950 data-[state=active]:shadow dark:ring-offset-zinc-950 dark:focus-visible:ring-zinc-300 dark:data-[state=active]:bg-zinc-950 dark:data-[state=active]:text-zinc-50",e),...s}));o.displayName=i.xz.displayName;let c=t.forwardRef(({className:e,...s},r)=>a.jsx(i.VY,{ref:r,className:(0,n.cn)("mt-2 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 focus-visible:ring-offset-2 dark:ring-offset-zinc-950 dark:focus-visible:ring-zinc-300",e),...s}));c.displayName=i.VY.displayName;var m=r(24966);let u=(0,m.j)("relative w-full rounded-lg border border-zinc-200 px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-zinc-950 [&>svg~*]:pl-7 dark:border-zinc-800 dark:[&>svg]:text-zinc-50",{variants:{variant:{default:"bg-white text-zinc-950 dark:bg-zinc-950 dark:text-zinc-50",destructive:"border-red-500/50 text-red-500 dark:border-red-500 [&>svg]:text-red-500 dark:border-red-900/50 dark:text-red-900 dark:dark:border-red-900 dark:[&>svg]:text-red-900"}},defaultVariants:{variant:"default"}}),x=t.forwardRef(({className:e,variant:s,...r},t)=>a.jsx("div",{ref:t,role:"alert",className:(0,n.cn)(u({variant:s}),e),...r}));x.displayName="Alert";let f=t.forwardRef(({className:e,...s},r)=>a.jsx("h5",{ref:r,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",e),...s}));f.displayName="AlertTitle";let h=t.forwardRef(({className:e,...s},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",e),...s}));h.displayName="AlertDescription";var p=r(1810),j=r(77251),g=r(50120),w=r(32684),b=r(20733);let v=(0,m.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),y=t.forwardRef(({className:e,...s},r)=>a.jsx(b.f,{ref:r,className:(0,n.cn)(v(),e),...s}));y.displayName=b.f.displayName;let N=w.RV,F=t.createContext({}),FormField=({...e})=>a.jsx(F.Provider,{value:{name:e.name},children:a.jsx(w.Qr,{...e})}),useFormField=()=>{let e=t.useContext(F),s=t.useContext(z),{getFieldState:r,formState:a}=(0,w.Gc)(),i=r(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=s;return{id:n,name:e.name,formItemId:`${n}-form-item`,formDescriptionId:`${n}-form-item-description`,formMessageId:`${n}-form-item-message`,...i}},z=t.createContext({}),k=t.forwardRef(({className:e,...s},r)=>{let i=t.useId();return a.jsx(z.Provider,{value:{id:i},children:a.jsx("div",{ref:r,className:(0,n.cn)("space-y-2",e),...s})})});k.displayName="FormItem";let S=t.forwardRef(({className:e,...s},r)=>{let{error:t,formItemId:i}=useFormField();return a.jsx(y,{ref:r,className:(0,n.cn)(t&&"text-red-500 dark:text-red-900",e),htmlFor:i,...s})});S.displayName="FormLabel";let P=t.forwardRef(({...e},s)=>{let{error:r,formItemId:t,formDescriptionId:i,formMessageId:n}=useFormField();return a.jsx(g.g7,{ref:s,id:t,"aria-describedby":r?`${i} ${n}`:`${i}`,"aria-invalid":!!r,...e})});P.displayName="FormControl";let E=t.forwardRef(({className:e,...s},r)=>{let{formDescriptionId:t}=useFormField();return a.jsx("p",{ref:r,id:t,className:(0,n.cn)("text-[0.8rem] text-zinc-500 dark:text-zinc-400",e),...s})});E.displayName="FormDescription";let I=t.forwardRef(({className:e,children:s,...r},t)=>{let{error:i,formMessageId:l}=useFormField(),d=i?String(i?.message):s;return d?a.jsx("p",{ref:t,id:l,className:(0,n.cn)("text-[0.8rem] font-medium text-red-500 dark:text-red-900",e),...r,children:d}):null});I.displayName="FormMessage";let R=t.forwardRef(({className:e,type:s,...r},t)=>a.jsx("input",{type:s,className:(0,n.cn)("flex h-9 w-full rounded-md border border-zinc-200 border-zinc-200 bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-zinc-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-zinc-950 disabled:cursor-not-allowed disabled:opacity-50 dark:border-zinc-800 dark:border-zinc-800 dark:placeholder:text-zinc-400 dark:focus-visible:ring-zinc-300",e),ref:t,...r}));R.displayName="Input";var C=r(46638),_=r(44584),A=r(46203),L=r(99787),G=r(83296),O=r(53399);let B=G.z.object({email:G.z.string().email({message:"Email must be in the correct format."}).min(3,{message:"Email must be at least 3 characters."}),password:G.z.string().min(6,{message:"Your password must be at least 6 characters."})});function LogInForm(){let{user:e,setUser:s}=(0,O.a)(),[r,i]=t.useState(!1),n=(0,w.cI)({resolver:(0,C.F)(B),mode:"onSubmit",defaultValues:{email:"",password:""}});return e?(0,a.jsxs)(x,{variant:"default",children:[a.jsx(L.Z,{className:"h-4 w-4"}),a.jsx(f,{children:"Sign up successful"}),(0,a.jsxs)(h,{children:["You are logged in as ",e.email," with ID ",e.id]})]}):a.jsx("div",{className:"relative max-w-xl m-auto space-y-4",children:a.jsx(A.E.div,{initial:{opacity:1,y:0},children:(0,a.jsxs)(j.Zb,{className:"bg-background text-white",children:[a.jsx(j.Ol,{}),a.jsx(j.aY,{children:a.jsx(N,{...n,children:(0,a.jsxs)("form",{id:"log-in-form",action:"/api/auth/login/email",method:"post",onSubmit:n.handleSubmit(e=>{if(r)return;i(!0);let a=new FormData,{email:t,password:n}=e;a.append("email",t),a.append("password",n),console.log(a),fetch("/api/auth/login/email",{method:"POST",credentials:"same-origin",body:a}).then(e=>{if(e.ok)return e.json();throw Error("Something went wrong")}).then(e=>{s(e)}).finally(()=>{i(!1)})}),className:"space-y-8",children:[a.jsx(FormField,{control:n.control,name:"email",render:({field:e})=>(0,a.jsxs)(k,{children:[a.jsx(S,{children:"Email address"}),a.jsx(P,{children:a.jsx(R,{...e,disabled:r,autoComplete:"email",required:!0})}),a.jsx(I,{})]})}),a.jsx(FormField,{control:n.control,name:"password",render:({field:e})=>(0,a.jsxs)(k,{children:[a.jsx(S,{children:"Password"}),a.jsx(P,{children:a.jsx(R,{...e,type:"password",disabled:r,autoComplete:"new-password",required:!0})}),a.jsx(I,{})]})})]})})}),a.jsx(j.eW,{className:"justify-end",children:(0,a.jsxs)("div",{className:"space-x-1",children:[a.jsx(p.Button,{variant:"link",className:"text-white",children:"Forgot password?"}),(0,a.jsxs)(p.Button,{variant:"default",type:"submit",form:"log-in-form",children:["Log in",r?a.jsx(_.BGW,{className:"ml-2 h-4 w-4 animate-spin"}):a.jsx(_.LZ3,{className:"ml-2 h-4 w-4"})]})]})})]})})})}let registerNewUser=async(e,s)=>{let r=await fetch("/api/auth/sign-up",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:s})});if(!r.body)throw Error("No Response Body");if(!r.ok)throw Error(r.status.toString())};var U=r(2489);let V=G.z.object({email:G.z.string().email({message:"Email must be in the correct format."}).min(3,{message:"Email must be at least 3 characters."}),password:G.z.string().min(6,{message:"Your password must be at least 6 characters."}),confirmPassword:G.z.string()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}).refine(e=>e.password!==e.email,{message:"Password cannot be the same as your email",path:["password"]});function SignUpForm(){let{user:e}=(0,O.a)(),[s,r]=t.useState(!1),i=(0,w.cI)({resolver:(0,C.F)(V),mode:"onSubmit",defaultValues:{email:"",password:""}});if(e)return(0,a.jsxs)(x,{variant:"default",children:[a.jsx(L.Z,{className:"h-4 w-4"}),a.jsx(f,{children:"Sign up successful"}),(0,a.jsxs)(h,{children:["You are logged in as ",e.email," with ID ",e.id]})]});let n=i.formState.isSubmitting;async function onSubmit(e){try{await registerNewUser(e.email,e.password),r(!0)}catch(e){r(!1)}finally{}}return(0,a.jsxs)("div",{className:"relative max-w-xl m-auto space-y-4",children:[a.jsx(U.M,{children:s?a.jsx(A.E.div,{className:"w-full",initial:{opacity:0,y:10},animate:{y:10,opacity:1,transition:{duration:.5}},children:(0,a.jsxs)(x,{variant:"default",children:[a.jsx(L.Z,{className:"h-4 w-4"}),a.jsx(f,{children:"Good"}),a.jsx(h,{children:"Check your inbox for the invitation."})]})}):null}),a.jsx(A.E.div,{initial:{opacity:1,y:0},animate:{opacity:s?0:1,y:s?10:0,transition:{duration:.5}},children:(0,a.jsxs)(j.Zb,{className:"bg-background text-white",children:[a.jsx(j.Ol,{}),a.jsx(j.aY,{children:a.jsx(N,{...i,children:(0,a.jsxs)("form",{id:"sign-up-form",action:"/api/auth/sign-up",method:"post",onSubmit:i.handleSubmit(onSubmit),className:"space-y-8",children:[a.jsx(FormField,{control:i.control,name:"email",render:({field:e})=>(0,a.jsxs)(k,{children:[a.jsx(S,{children:"Email address"}),a.jsx(P,{children:a.jsx(R,{...e,disabled:n,autoComplete:"email",required:!0})}),a.jsx(I,{})]})}),a.jsx(FormField,{control:i.control,name:"password",render:({field:e})=>(0,a.jsxs)(k,{children:[a.jsx(S,{children:"Password"}),a.jsx(P,{children:a.jsx(R,{...e,type:"password",disabled:n,autoComplete:"new-password",required:!0})}),a.jsx(E,{children:"Must be at least 6 characters."}),a.jsx(I,{})]})}),a.jsx(FormField,{control:i.control,name:"confirmPassword",render:({field:e})=>(0,a.jsxs)(k,{children:[a.jsx(S,{children:"Confirm password"}),a.jsx(P,{children:a.jsx(R,{...e,type:"password",disabled:n,autoComplete:"new-password",required:!0})}),a.jsx(I,{})]})})]})})}),a.jsx(j.eW,{className:"justify-end",children:(0,a.jsxs)(p.Button,{variant:"default",type:"submit",form:"sign-up-form",children:["Request",n?a.jsx(_.BGW,{className:"ml-2 h-4 w-4 animate-spin"}):a.jsx(_.LZ3,{className:"ml-2 h-4 w-4"})]})})]})})]})}let D={SIGN_UP:"s",LOGIN:"l"},AuthForm=e=>(0,a.jsxs)(l,{defaultValue:e.tab,className:"max-w-lg px:3 lg:px-0 mx-auto",children:[(0,a.jsxs)(d,{className:"grid w-full grid-cols-2 bg-zinc-800 text-white",children:[a.jsx(o,{value:D.SIGN_UP,children:"Sign up"}),a.jsx(o,{value:D.LOGIN,children:"Log in"})]}),a.jsx(c,{value:D.SIGN_UP,children:a.jsx(SignUpForm,{})}),a.jsx(c,{value:D.LOGIN,children:a.jsx(LogInForm,{})})]})},78674:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>AuthLayout});var a=r(25620);function AuthLayout(e){return a.jsx("div",{className:"py-3",children:e.children})}},81750:(e,s,r)=>{"use strict";r.d(s,{B:()=>l});var a=r(64074);let t=(0,a.createProxy)(String.raw`/home/shovonh/workspaces/anveio/apps/blog/src/components/custom/Auth/AuthForm.tsx`),{__esModule:i,$$typeof:n}=t;t.default;let l=t.AuthForm},154:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var a=r(6819);let __WEBPACK_DEFAULT_EXPORT__=e=>{let s=(0,a.fillMetadataSegment)(".",e.params,"favicon.ico");return[{type:"image/x-icon",sizes:"16x16",url:s+""}]}}};